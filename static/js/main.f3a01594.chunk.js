(this.webpackJsonplogin=this.webpackJsonplogin||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var c,a,s=n(1),r=n.n(s),i=n(30),o=(n(38),n(11)),u=n(2),d=(n(39),n(5)),j=n.n(d),l=n(10),b=n(4);!function(e){e.admin="admin",e.host="host",e.default=""}(c||(c={})),function(e){e.success="success",e.wrong="wrong",e.wait="wait",e.default=""}(a||(a={}));var p=n(0),h=r.a.createContext({});function O(e){var t=e.children,n=Object(s.useState)(c.default),a=Object(b.a)(n,2),r=a[0],i=a[1],o=Object(s.useState)(""),u=Object(b.a)(o,2),d=u[0],j=u[1];return Object(p.jsx)(h.Provider,{value:{status:r,userName:d,setNewStatus:function(e){i(e)},setUserName:j},children:t})}var m=r.a.createContext({});function v(e){var t=e.children,n=Object(s.useState)({HostName:"",Code:""}),c=Object(b.a)(n,2),a=c[0],r=c[1];return Object(p.jsx)(m.Provider,{value:{hostInfo:a,setHostInfo:r},children:t})}var x=n(15),f=n.n(x),N=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_APIHOST:"http://ec2-18-167-41-233.ap-east-1.compute.amazonaws.com/app",REACT_APP_MODE:"PROD"}).REACT_APP_PRODHOST,_={getParticipants:function(){var e=Object(l.a)(j.a.mark((function e(t){var n,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.Code,c=t.HostName,e.prev=1,e.next=4,f.a.get("".concat(N,"/login?PassCode=").concat(n,"&HostName=").concat(c));case 4:return a=e.sent,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(1),console.log(e.t0.response),e.abrupt("return",e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),upDatePaid:function(){var e=Object(l.a)(j.a.mark((function e(t,n){var c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=t).participants=n,e.prev=2,e.next=5,f.a.post("".concat(N,"/updateParticipants"),c);case 5:return a=e.sent,e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}(),adminLogin:function(){var e=Object(l.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("".concat(N,"/admin/login"),t);case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),adminGetAllEvent:function(){var e=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("".concat(N,"/admin/events"));case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()};var g=function(){var e=Object(s.useContext)(h),t=e.status,n=(e.userName,e.setUserName),a=e.setNewStatus,r=Object(s.useContext)(m),i=(r.hostInfo,r.setHostInfo),u=Object(s.useState)(""),d=Object(b.a)(u,2),O=d[0],v=d[1],x=Object(s.useState)(""),f=Object(b.a)(x,2),N=f[0],g=f[1],P=Object(s.useState)(!1),C=Object(b.a)(P,2),S=C[0],w=C[1];return Object(p.jsxs)("div",{className:"Landing",children:[S?Object(p.jsxs)("span",{className:"Landing__Warning",onClick:function(){w(!1)},children:["\u8acb\u78ba\u8a8d\u60a8\u662f\u5426\u662f\u7ba1\u7406\u54e1 ",Object(p.jsx)("br",{}),"\u5982\u679c\u4e0d\u662f\u7684\u8a71\u8acb\u7e8c\u9ede\u5de6\u4e0b\u89d2\u56de\u81f3host\u767b\u5165\u9801\u9762",Object(p.jsx)("br",{}),Object(p.jsx)("br",{}),"\u9ede\u64ca\u6211\u6d88\u5931"]}):"",Object(p.jsx)("button",{className:"Landing__Admin",onClick:function(){t==c.default?(w(!0),a(c.admin)):a(c.default)},children:"Admin"}),Object(p.jsxs)("div",{className:"Landing__form",children:[Object(p.jsx)("h1",{children:t==c.admin?"\u53e3\u8aaa\u5718 \u7ba1\u7406\u54e1\u52a9\u624b v1":"\u53e3\u8aaa\u5718 \u6d3b\u52d5\u52a9\u624b v1"}),Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{children:"Name:"}),Object(p.jsx)("input",{placeholder:"Enter Name here",value:N,onChange:function(e){g(e.target.value)}})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{children:t==c.admin?"Password":"PassCode"}),Object(p.jsx)("input",{placeholder:"Enter Code Here",value:O,onChange:function(e){v(e.target.value)}})]}),t==c.default||t==c.host?Object(p.jsx)(o.b,{to:"/host/".concat(N,"/").concat(O),children:Object(p.jsx)("button",{className:"submit",onClick:function(){a&&i&&(a(c.host),n(N),i({HostName:N,Code:O}))},children:"Submit"})}):Object(p.jsx)(o.b,{to:"/admin",children:Object(p.jsx)("button",{className:"submit",onClick:Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.adminLogin({AdminName:N,Password:O});case 2:200!==(null===(t=e.sent)||void 0===t?void 0:t.status)?a(c.default):n(N);case 4:case"end":return e.stop()}}),e)}))),children:"Submit"})})]})]})},P=n(32);var C=function(e){var t=Object(s.useState)(e),n=Object(b.a)(t,2),c=n[0],a=n[1];return{participants:c,setPaid:function(e){var t=Object(P.a)(c);t[e].paid=!t[e].paid,console.log(t[e].paid),a(t)},setParticipants:a}},S=n(66);function w(e){e.participantId;var t=e.participantName,n=(e.eventId,e.isAdmin,e.index),c=e.paid,a=(e.eventName,e.setPaid);return Object(p.jsxs)("div",{className:"List__member ".concat(n%2===0?"darkgrey":"grey"),children:[Object(p.jsx)("h2",{children:t}),c?Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{type:"checkbox",checked:!0,onChange:function(){a(n)}}),Object(p.jsx)("label",{children:"Paid"})]}):Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{type:"checkbox",onChange:function(){a(n)}}),Object(p.jsx)("label",{children:"Unpaid"})]})]})}var A=function(){var e=Object(s.useContext)(h),t=e.status,n=e.setNewStatus,r=Object(u.f)(),i=Object(s.useState)({}),o=Object(b.a)(i,2),d=o[0],O=o[1],m=C((null===d||void 0===d?void 0:d.participants)||[]),v=m.participants,x=m.setPaid,f=m.setParticipants,N=Object(s.useState)(a.default),g=Object(b.a)(N,2),P=g[0],A=g[1],E=Object(s.useState)(!1),k=Object(b.a)(E,2),T=k[0],D=k[1],L=Object(s.useState)(!1),H=Object(b.a)(L,2),I=H[0],y=H[1],R=Object(u.g)(),W=R.HostName,F=R.PassCode;Object(s.useEffect)((function(){function e(){return(e=Object(l.a)(j.a.mark((function e(){var t,n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={HostName:W,Code:F},e.next=3,_.getParticipants(t);case 3:200===(n=e.sent).status?(c=n.data,A(a.success),O(c)):A(a.wrong);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(s.useEffect)((function(){(null===d||void 0===d?void 0:d.participants)&&f(d.participants)}),[d]);var U=d||{},K=(U.eventId,U.eventName,U.hostName),M=(U.passCode,U.eventDate,U.participantNumber,200*v.length),B=v.filter((function(e,t){return!0===e.isAdmin})),z=v.filter((function(e,t){return!0===e.paid})),G=v.map((function(e,t){return Object(p.jsx)(w,{eventName:e.eventName,participantId:e.participantId,eventId:e.eventId,setPaid:x,participantName:e.participantName,index:t,paid:e.paid,isAdmin:e.isAdmin},S.a())}));switch(P){case a.success:return Object(p.jsxs)("div",{className:"List",onClick:function(e){D(!1)},children:[I?Object(p.jsx)("div",{className:"List__success",onClick:function(){n&&(n(c.default),r.push("/"))},children:Object(p.jsx)("div",{children:"Successfully Submitted!"})}):"",Object(p.jsxs)("h1",{children:["Welcome ",K," !"]}),Object(p.jsxs)("div",{className:"List__container",children:[Object(p.jsxs)("div",{className:"List__info",children:[Object(p.jsxs)("p",{children:["Participants : ",v.length]}),Object(p.jsxs)("p",{children:["Admins : ",B.length]})]}),Object(p.jsx)("div",{className:"List__List",children:G}),Object(p.jsxs)("div",{className:"List__money",children:[Object(p.jsxs)("div",{className:"left",children:[Object(p.jsx)("p",{children:"Shall Recieve:"}),Object(p.jsxs)("p",{children:["$",M]})]}),Object(p.jsxs)("div",{className:"right",children:[Object(p.jsx)("p",{children:"Collected :"}),Object(p.jsxs)("p",{children:["$",200*z.length]})]})]})]}),Object(p.jsx)("div",{className:"List__buttons",children:Object(p.jsx)("button",{className:T?"confirm":"submit",onClick:function(e){e.stopPropagation();var n=new Date,a=new Date(d.eventDate);(t==c.host&&(n.getMonth()!==a.getMonth()||n.getDate()!==a.getDate()||n.getHours()>22)?alert("\u4e0d\u80fd\u7de8\u8f2f\u4e86\u5537\u5df2\u8d85\u904e\u6642\u9593"):D(!0),1==T)&&(_.upDatePaid(d,v)&&y(!0))},children:T?"Confirm":"Submit"})})]});case a.wrong:return Object(p.jsx)("div",{children:"You may enter the wrong Passcode or HostName"});default:return Object(p.jsx)("div",{children:"Please Wait"})}};function E(e){var t=e.week,n=(e.eventId,e.index),c=e.eventName,a=e.hostName,s=e.passCode,r=e.participantNumber;return Object(p.jsxs)("tr",{className:"Admin__event ".concat(n%2===0?"darkgrey":"grey"),children:[Object(p.jsx)("td",{className:"week",children:Object(p.jsx)(o.b,{to:"/host/".concat(a,"/").concat(s),children:t})}),Object(p.jsx)("td",{className:"topic",children:Object(p.jsx)(o.b,{to:"/host/".concat(a,"/").concat(s),children:c})}),Object(p.jsx)("td",{className:"people",children:Object(p.jsx)(o.b,{to:"/host/".concat(a,"/").concat(s),children:r})})]})}var k=function(){var e=Object(s.useContext)(h),t=(e.status,e.userName),n=(e.setNewStatus,e.setUserName,Object(s.useState)([])),c=Object(b.a)(n,2),a=c[0],r=c[1];Object(s.useEffect)((function(){function e(){return(e=Object(l.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.adminGetAllEvent();case 2:t=e.sent,n=t.data,200==t.status?r(n):console.log(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var i=a.sort((function(e,t){return t.week-e.week})).map((function(e,t){return Object(p.jsx)(E,{passCode:e.passCode,eventDate:e.eventDate,hostName:e.hostName,index:t,eventId:e.eventId,week:e.week,eventName:e.eventName,participantNumber:e.participantNumber},S.a())}));return Object(p.jsxs)("div",{className:"Admin",children:[Object(p.jsxs)("h1",{children:["Welcome ",t," !"]}),Object(p.jsxs)("div",{className:"Admin__container",children:[Object(p.jsxs)("div",{className:"Admin__info",children:[Object(p.jsxs)("p",{children:["Total Events : ",a.length," "]}),Object(p.jsx)("p",{children:"Total Participants :"})]}),Object(p.jsx)("table",{className:"Admin__EventList",children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{className:"Admin__event",children:[Object(p.jsx)("th",{className:"week",children:"week"}),Object(p.jsx)("th",{className:"topic",children:"Topic"}),Object(p.jsx)("th",{className:"people",children:"People "})]}),i]})})]}),Object(p.jsx)("div",{className:"Admin__buttons",children:Object(p.jsx)("button",{children:"Return"})})]})};var T=function(){return console.log(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_APIHOST:"http://ec2-18-167-41-233.ap-east-1.compute.amazonaws.com/app",REACT_APP_MODE:"PROD"})),Object(p.jsx)(o.a,{children:Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(u.c,{children:Object(p.jsxs)(v,{children:[Object(p.jsx)(u.a,{exact:!0,path:"/",children:Object(p.jsx)(g,{})}),Object(p.jsx)(u.a,{path:"/host/:HostName/:PassCode",children:Object(p.jsx)(A,{})}),Object(p.jsx)(u.a,{exact:!0,path:"/admin",children:Object(p.jsx)(k,{})})]})})})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))};i.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(O,{children:Object(p.jsx)(T,{})})}),document.getElementById("root")),D()}},[[65,1,2]]]);
//# sourceMappingURL=main.f3a01594.chunk.js.map